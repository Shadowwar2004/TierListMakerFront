<div class="container">
  <header class="header">
    <div class="logo">★ TierList Maker</div>

    <div class="user-info">
      @if (isLoggedIn) {
        <span>Bonjour, <strong>{{ currentUser?.prenom }}</strong></span>

        <a routerLink="/create-element" class="btn btn-outline" style="margin-right: 10px;">
          + Ajouter un Élément
        </a>

        <button class="btn btn-outline" (click)="logout()">Se déconnecter</button>
      } @else {
        <a routerLink="/login" class="btn btn-primary">Se connecter</a>
      }
    </div>
  </header>

  @if (isLoggedIn) {
    <section class="create-section">
      <h2>Nouvelle Tier List</h2>

      <div class="input-group">
        <input
          type="text"
          [(ngModel)]="newTierListName"
          placeholder="Nom de votre liste (ex: Meilleurs Films 2025)"
        >
        <button
          class="btn btn-success"
          (click)="onCreateTierList()"
          [disabled]="!newTierListName"
        >
          + Créer
        </button>
      </div>
    </section>
  }

  <section class="list-section">
    <h2>Listes de la communauté</h2>

    <div class="grid">
      @for (list of tierLists; track list.id) {
        <div class="card">
          <div class="card-header">
            <h3>{{ list.nom }}</h3>
            <span class="author">
              Par {{ list.utilisateur?.prenom }} {{ list.utilisateur?.nom }}
            </span>
          </div>

          <div class="card-body">
            <a [routerLink]="['/tierlist', list.id]" class="btn btn-primary">
              Ouvrir
            </a>

            @if (isOwner(list)) {
              <button class="btn btn-danger" (click)="onDelete(list.id)">
                Supprimer
              </button>
            }
          </div>
        </div>
      }
    </div>

    @if (tierLists.length === 0) {
      <p class="empty-msg">Aucune liste pour le moment.</p>
    }
  </section>

  <footer>
    <p>© 2026 TierList Maker. Tous droits réservés.</p>
  </footer>
</div>
